<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns:fx="http://javafx.com/fxml"
      fx:controller="orhestra.coordinator.ui.TaskMonitoringController"
      spacing="12" styleClass="pad">

    <!-- Stats header -->
    <HBox spacing="16" alignment="CENTER_LEFT" styleClass="stats-bar">
        <Label text="Ð—Ð°Ð´Ð°Ñ‡Ð¸" styleClass="section-header"/>
        <Region HBox.hgrow="ALWAYS"/>
        <VBox alignment="CENTER" spacing="1">
            <Label fx:id="lblNew" text="0" styleClass="stat-value"/>
            <Label text="queued" styleClass="stat-label"/>
        </VBox>
        <VBox alignment="CENTER" spacing="1">
            <Label fx:id="lblRunning" text="0" styleClass="stat-value" style="-fx-text-fill: #e6a817;"/>
            <Label text="running" styleClass="stat-label"/>
        </VBox>
        <VBox alignment="CENTER" spacing="1">
            <Label fx:id="lblDone" text="0" styleClass="stat-value" style="-fx-text-fill: #2e9e4f;"/>
            <Label text="done" styleClass="stat-label"/>
        </VBox>
        <VBox alignment="CENTER" spacing="1">
            <Label fx:id="lblFailed" text="0" styleClass="stat-value" style="-fx-text-fill: #d64545;"/>
            <Label text="failed" styleClass="stat-label"/>
        </VBox>
    </HBox>

    <!-- Recent JSON files -->
    <TitledPane text="Ð¤Ð°Ð¹Ð»Ñ‹ Ð·Ð°Ð´Ð°Ñ‡ (JSON)" expanded="true" collapsible="false" styleClass="section-pane">
        <content>
            <VBox spacing="8">
                <padding><Insets top="6" right="8" bottom="6" left="8"/></padding>

                <!-- Row 1: ComboBox + Remove/Clear -->
                <HBox spacing="6" alignment="CENTER_LEFT">
                    <ComboBox fx:id="recentJsonCombo" promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸Ð· Ð½ÐµÐ´Ð°Ð²Ð½Ð¸Ñ…â€¦"
                              HBox.hgrow="ALWAYS" maxWidth="1.7976931348623157E308"/>
                    <Button text="âœ•" onAction="#handleRemoveJson" styleClass="btn-icon">
                        <tooltip><Tooltip text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ°"/></tooltip>
                    </Button>
                    <Button text="ðŸ—‘" onAction="#handleClearJson" styleClass="btn-icon">
                        <tooltip><Tooltip text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº"/></tooltip>
                    </Button>
                </HBox>

                <!-- Row 2: Choose + Load + Refresh -->
                <HBox spacing="8">
                    <Button text="ðŸ“‚ Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ JSONâ€¦" onAction="#onAddJsonFile"/>
                    <Button text="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ð¹" onAction="#handleLoadSelectedJson" styleClass="btn-primary"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ" onAction="#refreshTasks"/>
                </HBox>
            </VBox>
        </content>
    </TitledPane>

    <!-- Table -->
    <TableView fx:id="taskTable" VBox.vgrow="ALWAYS">
        <placeholder>
            <Label text="Ð—Ð°Ð´Ð°Ñ‡ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚. Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ JSON Ð¸Ð»Ð¸ Ð´Ð¾Ð¶Ð´Ð¸Ñ‚ÐµÑÑŒ Ð·Ð°Ð´Ð°Ñ‡ Ð¾Ñ‚ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð¾Ñ€Ð°."
                   styleClass="muted" style="-fx-font-size: 14;"/>
        </placeholder>
        <columns>
            <TableColumn fx:id="idColumn"       text="ID"        prefWidth="160"/>
            <TableColumn fx:id="algColumn"      text="ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼"  prefWidth="100"/>
            <TableColumn fx:id="funcColumn"     text="Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ"   prefWidth="120"/>
            <TableColumn fx:id="iterColumn"     text="Ð˜Ñ‚ÐµÑ€Ð°Ñ†Ð¸Ð¸"  prefWidth="80"/>
            <TableColumn fx:id="runtimeColumn"  text="Ð’Ñ€ÐµÐ¼Ñ"     prefWidth="120"/>
            <TableColumn fx:id="statusColumn"   text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ"    prefWidth="120"/>
            <TableColumn fx:id="progressColumn" text="ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ"  prefWidth="120"/>
        </columns>
    </TableView>
</VBox>
